<!doctype html>
<html lang="ko">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <title>ë¹„ë°€ ìì„ì˜ ê·¹ì„ ë°í˜€ë¼! (ì‹œê°„ ì œí•œ ë²„ì „)</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;700;900&display=swap" rel="stylesheet">
    <style>
        /* --- 1. ëª¨ë˜ ì»¬ëŸ¬ ë° ë³€ìˆ˜ ì •ì˜ (ë‰´ëª¨í”¼ì¦˜ ìµœì í™”) --- */
        :root{
            /* ë² ì´ìŠ¤ */
            --bg-primary: #f7f9fc;
            --card-bg: #f7f9fc;    /* ë°°ê²½ê³¼ ì¹´ë“œ ë°°ê²½ìƒ‰ì„ í†µì¼ */
            --text-dark: #1A1F36;
            --text-muted: #5E6E85;
            --accent: #5F6AFB; /* ë©”ì¸ ì•¡ì„¼íŠ¸ (ë³´ë¼ë¹› ë¸”ë£¨) */
            
            /* ê·¹ ìƒ‰ìƒ (ìœ ì§€) */
            --n-pole: #7FB5FF; /* Nê·¹: ì†Œí”„íŠ¸ ë¸”ë£¨ */
            --s-pole: #FF8A9B; /* Sê·¹: ì†Œí”„íŠ¸ í•‘í¬ */
            --n-zone: #EBF4FF; 
            --s-zone: #FFF0F4; 

            /* í”¼ë“œë°± */
            --success: #3A9C7A;
            --error: #D95353;
            --warning: #F5A623; 
            
            /* ë‰´ëª¨í”¼ì¦˜ ê·¸ë¦¼ì ì •ì˜ */
            --shadow-neo-light: #ffffff;
            --shadow-neo-dark: rgba(200, 204, 210, 0.7); 
            
            /* íŠ€ì–´ë‚˜ì˜¨(Raised) íš¨ê³¼ */
            --shadow-neo-out: 8px 8px 16px var(--shadow-neo-dark), -8px -8px 16px var(--shadow-neo-light);
            /* ëˆŒë¦°(Pressed) íš¨ê³¼ */
            --shadow-neo-in: inset 6px 6px 12px var(--shadow-neo-dark), inset -6px -6px 12px var(--shadow-neo-light);
            
            --font-size-title: clamp(2rem, 5vw, 2.8rem);
        }
        
        /* --- 2. ê¸°ë³¸ ìŠ¤íƒ€ì¼ ë° ë ˆì´ì•„ì›ƒ --- */
        *{box-sizing:border-box}
        html,body{
            height:100%;
            margin:0;
            font-family: 'Noto Sans KR', sans-serif;
            background: var(--bg-primary); /* ë‹¨ìƒ‰ ë˜ëŠ” ë§¤ìš° ë¶€ë“œëŸ¬ìš´ ê·¸ë¼ë°ì´ì…˜ */
            color: var(--text-dark);
            line-height: 1.6;
        }

        .container{
            max-width:1400px;
            margin:0 auto;
            padding: clamp(10px, 2vw, 20px);
            display:flex;
            flex-direction:column;
            gap: 20px;
        }
        
        /* í—¤ë”/ìŠ¤ì½”ì–´ë³´ë“œ */
        .header{
            display: grid;
            grid-template-columns: 1fr auto;
            align-items: center;
            gap: 20px;
        }
        .title{
            font-size: var(--font-size-title);
            font-weight: 900;
            color: var(--accent);
            letter-spacing: -1px;
        }
        .scoreRow{
            display: flex;
            gap: 15px;
        }
        .scoreItem{
            background: var(--card-bg);
            padding: 12px 20px;
            border-radius: 18px; /* ë” ë‘¥ê¸€ê²Œ */
            box-shadow: var(--shadow-neo-out); /* ë‰´ëª¨í”¼ì¦˜ ì ìš© */
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 100px;
            transition: all 0.3s;
        }
        .scoreLabel{
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--text-muted);
            margin-bottom: 4px;
        }
        .scoreValue{
            font-size: 2rem;
            font-weight: 900;
            color: var(--text-dark);
            line-height: 1;
        }
        .comboValue{color: var(--s-pole);}

        /* íƒ€ì´ë¨¸ íŠ¹ì • ìŠ¤íƒ€ì¼ */
        .scoreItem.timer .scoreValue {
            color: var(--warning); 
            transition: color 300ms;
        }
        .scoreItem.timer.critical .scoreValue {
            color: var(--error); 
        }

        /* HUD - íƒ€ì´ë¨¸ ê²Œì´ì§€ ë°”ë¡œ ë³€ê²½ */
        .hud{
            background: var(--card-bg);
            padding: 18px 20px; 
            border-radius: 20px; 
            box-shadow: var(--shadow-neo-out); /* ë‰´ëª¨í”¼ì¦˜ ì ìš© */
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .time-gauge-container {
            position: relative;
            width: 100%;
            height: 30px; 
            background: var(--card-bg); /* ë°°ê²½ìƒ‰ê³¼ ë™ì¼í•˜ê²Œ */
            border-radius: 15px;
            box-shadow: var(--shadow-neo-in); /* ëˆŒë¦° íš¨ê³¼ ì ìš© */
            overflow: hidden; 
            transition: box-shadow 0.3s;
        }

        .time-gauge-fill {
            position: absolute;
            top: 0;
            right: 0; 
            height: 100%;
            width: 100%; 
            background: var(--warning); 
            transition: width 1s linear, background 0.3s ease; 
            border-radius: 15px;
            box-shadow: inset 0 0 5px rgba(0,0,0,0.1);
            transform-origin: right;
        }
        
        /* ì„ê³„ ì‹œê°„ ì‹œ ë¹¨ê°„ìƒ‰ìœ¼ë¡œ ë³€ê²½ */
        .time-gauge-container.critical .time-gauge-fill {
            background: var(--error);
        }

        .time-gauge-icon {
            position: absolute;
            top: 50%;
            left: 0; 
            width: 36px;
            height: 36px;
            transform: translate(-50%, -50%); 
            transition: left 1s linear;
            z-index: 10;
            pointer-events: none; 
        }

        .icon-shape {
            width: 100%;
            height: 100%;
            background: var(--card-bg);
            border: 3px solid var(--text-dark);
            border-radius: 10px;
            display: flex;
            flex-direction: column; 
            align-items: center;
            justify-content: flex-start;
            overflow: hidden;
            box-shadow: var(--shadow-neo-out); /* ì•„ì´ì½˜ì—ë„ ë‰´ëª¨í”¼ì¦˜ ì ìš© */
            border: none;
        }
        .icon-pole-N {
            width: 100%;
            height: 50%;
            background-color: var(--n-pole);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
        }
        .icon-pole-S {
            width: 100%;
            height: 50%;
            background-color: var(--s-pole);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
        }
        .icon-pole-N, .icon-pole-S {
            font-size: 1rem;
            text-shadow: 0 1px 2px rgba(0,0,0,0.2);
        }

        /* ë©”ì¸ ì˜ì—­ (Grid Layout) */
        .main{
            display: grid;
            grid-template-columns: 3fr 1fr; 
            gap: 30px;
            align-items: stretch;
        }
        .play{
            background: var(--card-bg);
            border-radius: 30px;
            padding: 12px;
            position:relative;
            min-height: 560px;
            box-shadow: var(--shadow-neo-out); /* ë‰´ëª¨í”¼ì¦˜ ì ìš© */
            overflow:hidden;
            touch-action:none;
            border: none;
            transition: box-shadow 0.3s;
        }
        .panel{
            background: var(--card-bg);
            border-radius: 30px;
            padding: 20px;
            display:flex;
            flex-direction:column;
            gap: 15px;
            box-shadow: var(--shadow-neo-out); /* ë‰´ëª¨í”¼ì¦˜ ì ìš© */
            border: none;
            transition: box-shadow 0.3s;
        }
        
        /* Play Area ë‚´ë¶€ ìš”ì†Œ */
        .glow{
            position:absolute;
            border-radius:50%;
            pointer-events:none;
            filter:blur(30px); 
            opacity:0;
            transform:translate(-50%,-50%) scale(0.8);
            transition:opacity 200ms;
        }
        .zone.n{left:0;width:50%;background:var(--n-zone);}
        .zone.s{right:0;width:50%;background:var(--s-zone);}
        .zone{position:absolute;top:0;bottom:0;pointer-events:none}
        .divider{
            position:absolute;left:50%;top:0;bottom:0;width:4px;
            background:rgba(0,0,0,0.08); /* ë‹¨ìˆœí•œ ì¤‘ì•™ì„  */
            transform:translateX(-50%);border-radius:4px;pointer-events:none
        } 

        /* ê¸°ì¤€ ìì„ (ì›í˜•) */
        .refMag{
            position:absolute;width:280px;height:280px;border-radius:50%;
            display:flex;align-items:center;justify-content:center;
            font-weight:900;color:#fff;
            box-shadow: 5px 5px 15px rgba(0,0,0,0.2); /* ìì„ì€ ë‰´ëª¨í”¼ì¦˜ ëŒ€ì‹  ê°•í•œ ê·¸ë¦¼ì ìœ ì§€ */
            pointer-events:none;
            transition: background 300ms;
        }
        .refN{background:linear-gradient(180deg, #b2d6ff, var(--n-pole));color:#004780} 
        .refS{background:linear-gradient(180deg, #ffc5d1, var(--s-pole));color:#6b001a} 
        .refLabel{font-size:38px; text-shadow: var(--shadow-sm);}

        /* ë“œë˜ê·¸ ê°€ëŠ¥í•œ í°ìƒ‰ ìì„ */
        .whiteMag{
            position:absolute;width:144px;height:300px;
            background:var(--card-bg);
            border: none; /* ê¸°ì¡´ border ì œê±° */
            box-shadow: var(--shadow-neo-out); /* ë‰´ëª¨í”¼ì¦˜ ì ìš© */
            pointer-events:auto;touch-action:none;
            cursor:grab;transform:translate(-50%,-50%);
            display: flex; flex-direction: column; padding: 0; 
            border-radius: 38px;
            transition: box-shadow 200ms, transform 50ms;
        }
        .whiteMag:active{ 
            box-shadow: var(--shadow-neo-out); /* ë“œë˜ê·¸ ì¤‘ì—ëŠ” íŠ€ì–´ë‚˜ì˜¨ íš¨ê³¼ ìœ ì§€ */
            transform:translate(calc(-50% + var(--dx,0px)), calc(-50% + var(--dy,0px))) rotate(var(--rot,0deg)) scale(1.02);
        }
        
        .whiteHalf{width: 100%;height: 50%;display: flex;align-items: center;justify-content: center;}
        .whiteTop {border-top-left-radius: 38px;border-top-right-radius: 38px; background: var(--card-bg);}
        .whiteBottom {
            border-top: 2px dashed rgba(0,0,0,0.15);
            border-bottom-left-radius: 38px;
            border-bottom-right-radius: 38px;
            background: var(--card-bg);
        }
        .whiteLabel{font-size: clamp(1.5rem, 3vw, 2.5rem);font-weight: 900;color: var(--text-dark);margin: 0;}

        /* ì• ë‹ˆë©”ì´ì…˜ */
        .attachEffect{animation:attachScale 400ms cubic-bezier(.2,.9,.1,1) forwards} 
        .repelEffect{animation:repelMove 300ms cubic-bezier(.2,.9,.1,1) forwards} 
        
        @keyframes attachScale{
            0%{transform:translate(-50%,-50%) scale(1)}
            50%{transform:translate(-50%,-50%) scale(0.96)}
            100%{transform:translate(-50%,-50%) scale(0.9)}
        }
        @keyframes repelMove{
            0%{transform:translate(-50%,-50%) rotate(0)}
            40%{transform:translate(calc(-50% + var(--rx,0px)), calc(-50% + var(--ry,0px))) rotate(10deg)} 
            100%{transform:translate(-50%,-50%) rotate(0)}
        }

        /* Right Panel */
        .question{
            font-weight: 800;
            color: var(--text-dark);
            text-align: center; 
            font-size: 1.5rem;
            padding: 10px 0;
            margin-bottom: 5px;
            border-bottom: 2px solid #f0f0f0;
        }
        .poleBtns{
            display:grid;
            grid-template-columns: 1fr;
            gap: 12px;
            flex-grow: 1; 
        }
        button.pole{
            padding: 25px 12px;
            border-radius: 20px;
            border: none;
            font-weight: 800;
            font-size: 2rem;
            cursor:pointer;
            transition: all 200ms ease;
            
            /* ë‰´ëª¨í”¼ì¦˜ ì ìš© */
            box-shadow: var(--shadow-neo-out); 
        }
        button.pole:active:not(:disabled){
            transform: translateY(0);
            box-shadow: var(--shadow-neo-in); /* ëˆŒë¦° íš¨ê³¼ */
        }
        button.pole:disabled{opacity: 0.4; cursor: not-allowed; box-shadow: none;}
        
        /* ë²„íŠ¼ ìƒ‰ìƒ ìœ ì§€ */
        .poleN{background:linear-gradient(145deg, #dceeff, var(--n-pole));color:#004780} 
        .poleS{background:linear-gradient(145deg, #ffe0e7, var(--s-pole));color:#6b001a} 

        .feedback{
            height: 70px;
            border-radius: 18px;
            background: var(--card-bg);
            display:flex;
            align-items:center;
            justify-content:center;
            font-weight: 700;
            color: var(--text-muted);
            box-shadow: var(--shadow-neo-out); /* ë‰´ëª¨í”¼ì¦˜ ì ìš© */
            border: none;
            transition: background 300ms;
        }
        
        /* ê²Œì„ ë°©ë²• ì„¹ì…˜ */
        .gameMethod {
            padding: 15px;  
            background: var(--card-bg);  
            border-radius: 18px;  
            box-shadow: var(--shadow-neo-out);  /* ë‰´ëª¨í”¼ì¦˜ ì ìš© */
            border: none;
        }
        .gameMethodTitle {
            font-weight: 800;  
            font-size: 1rem;  
            color: var(--accent);
            border-bottom: 1px dashed #e0e0e0;
            padding-bottom: 6px;
            margin-bottom: 8px;
            text-align: center;
        }
        .gameMethodContent {
            font-size: 0.85rem;  
            line-height: 1.5;
            color: var(--text-muted);
            text-align: center;
        }

        /* ë°˜ì‘í˜• ì²˜ë¦¬ */
        @media (max-width:880px){
            .main{
                grid-template-columns: 1fr;  
                gap: 20px;
            }
            .panel{order: 2;}
            .play{order: 1; min-height: 400px;}
            .header{grid-template-columns: 1fr;}
            .title{text-align: center;}
            .scoreRow{justify-content: center;}
        }

        /* --- 3. ê°œë… í™•ì¸ í™”ë©´ ë° íŒì—… ìŠ¤íƒ€ì¼ (fullScreenPanel) --- */
        .fullScreenPanel {
            position: fixed; 
            top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg-primary); /* ë°°ê²½ìƒ‰ í†µì¼ */
            z-index: 1000;
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            padding: 20px; gap: 30px; text-align: center;
        }
        .conceptTitle {
            font-size: var(--font-size-title);
            font-weight: 900;
            color: var(--accent);
            padding: 15px 30px;
            background: var(--card-bg);
            border-radius: 25px;
            box-shadow: var(--shadow-neo-out); /* ë‰´ëª¨í”¼ì¦˜ ì ìš© */
        }
        .conceptQuestionRow {
            background: var(--card-bg);
            padding: 30px;
            border-radius: 25px;  
            box-shadow: var(--shadow-neo-out);  /* ë‰´ëª¨í”¼ì¦˜ ì ìš© */
            width: 90%; max-width: 600px;  
            display: flex; flex-direction: column; gap: 20px;  
            border: none;
        }
        .questionText {
            font-size: clamp(1.2rem, 2vw, 1.6rem);
            font-weight: 700;
            color: var(--text-dark);
            padding-bottom: 15px;
        }
        .conceptButtons {
            display: flex; justify-content: center; gap: 15px;
        }
        .conceptButtons button {
            padding: 15px 35px;
            border-radius: 16px;  
            border: none;
            background: var(--card-bg);  
            color: var(--text-dark);
            font-weight: 700;
            font-size: 1.1rem;
            box-shadow: var(--shadow-neo-out); /* ë‰´ëª¨í”¼ì¦˜ ì ìš© */
            cursor: pointer;
            transition: all 150ms;
        }
        .conceptButtons button:active {
            box-shadow: var(--shadow-neo-in); /* ëˆŒë¦° íš¨ê³¼ */
            transform: translateY(0);
        }
        .conceptButtons button.correct {
            background: linear-gradient(145deg, #a8e6d2, var(--success));
            color: white;
            box-shadow: var(--shadow-neo-out); 
        }
        .conceptButtons button.incorrect {
            background: linear-gradient(145deg, #ff8c8c, var(--error));
            color: white;
            box-shadow: var(--shadow-neo-out);
        }
        .conceptFeedback {
            min-height: 30px;
            font-size: 1rem;
            font-weight: 700;
            margin-top: 5px;
            opacity: 0;
            transition: opacity 300ms;
        }
        .conceptFeedback.show { opacity: 1; }

        #startButton {
            padding: 18px 50px;
            font-size: 1.5rem;
            font-weight: 800;
            border: none;
            border-radius: 20px;
            margin-top: 20px;
            cursor: pointer;
            background: linear-gradient(145deg, #6c80ff, var(--accent));
            color: white;
            box-shadow: var(--shadow-neo-out); /* ë‰´ëª¨í”¼ì¦˜ ì ìš© */
            transition: all 300ms;
        }
        #startButton:active {
            box-shadow: var(--shadow-neo-in);
            transform: scale(0.98);
        }
        #startButton:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            box-shadow: none;
            transform: none;
        }

        /* ê²Œì„ ì˜¤ë²„ íŒì—… ìŠ¤íƒ€ì¼ */
        .popupContent {
            background: var(--card-bg);
            padding: 40px;
            border-radius: 25px;
            box-shadow: var(--shadow-neo-out); /* ë‰´ëª¨í”¼ì¦˜ ì ìš© */
            width: 90%; max-width: 500px;
            border: none;
            animation: fadeInDown 500ms ease-out;
            z-index: 1100; 
        }
        .popupTitle {
            font-size: 2.5rem;
            font-weight: 900;
            color: var(--accent);
            margin-bottom: 10px;
        }
        .finalScoreText {
            font-size: 1.2rem;
            color: var(--text-muted);
            margin-bottom: 5px;
        }
        .popupScore {
            font-size: 4rem;
            font-weight: 900;
            color: var(--error);
            margin-bottom: 30px;
        }
        .popupButtons {
            display: flex;
            justify-content: center;
            gap: 15px;
        }
        .actionBtn {
            padding: 12px 25px;
            font-size: 1rem;
            font-weight: 700;
            border: none;
            border-radius: 16px;
            cursor: pointer;
            transition: all 200ms;
            box-shadow: var(--shadow-neo-out); /* ë‰´ëª¨í”¼ì¦˜ ì ìš© */
        }
        .actionBtn:active {
            transform: scale(0.98);
            box-shadow: var(--shadow-neo-in);
        }
        .retryBtn {
            background: linear-gradient(145deg, #5ac59f, var(--success));
            color: white;
        }
        .conceptBtn {
            background: linear-gradient(145deg, #f0f4f8, #e0e6ed);
            color: var(--text-dark);
        }
        
        @keyframes fadeInDown {
            0% { opacity: 0; transform: translateY(-50px); }
            100% { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>

<div id="conceptScreen" class="fullScreenPanel">
    <div class="conceptTitle">ìì„ì˜ ê¸°ë³¸ ì›ë¦¬ í™•ì¸í•˜ê¸°</div>
    
    <div class="conceptQuestionRow" id="q1">
        <div class="questionText">ê°œë… 1: ìì„ì€ ê°™ì€ ê·¹ë¼ë¦¬ ê°€ê¹Œì´ í–ˆì„ ë•Œ</div>
        <div class="conceptButtons">
            <button data-concept="concept1" data-choice="attract">ì„œë¡œ ëŒì–´ë‹¹ê¹ë‹ˆë‹¤</button>
            <button data-concept="concept1" data-choice="repel">ì„œë¡œ ë°€ì–´ëƒ…ë‹ˆë‹¤</button>
        </div>
        <div class="conceptFeedback" id="fb1"></div>
    </div>
    
    <div class="conceptQuestionRow" id="q2">
        <div class="questionText">ê°œë… 2: ìì„ì€ ë‹¤ë¥¸ ê·¹ë¼ë¦¬ ê°€ê¹Œì´ í–ˆì„ ë•Œ</div>
        <div class="conceptButtons">
            <button data-concept="concept2" data-choice="attract">ì„œë¡œ ëŒì–´ë‹¹ê¹ë‹ˆë‹¤</button>
            <button data-concept="concept2" data-choice="repel">ì„œë¡œ ë°€ì–´ëƒ…ë‹ˆë‹¤</button>
        </div>
        <div class="conceptFeedback" id="fb2"></div>
    </div>
    
    <button id="startButton" disabled>ê²Œì„ ì‹œì‘í•˜ê¸°</button>
</div>

<div id="gameScreen" style="display: none;">
    <div class="container">
        <div class="header">
            <div class="title">ë¹„ë°€ ìì„ì˜ ê·¹ì„ ë°í˜€ë¼!</div>
            <div class="scoreRow">
                <div class="scoreItem timer"><div class="scoreLabel">ë‚¨ì€ ì‹œê°„</div><strong id="timer" class="scoreValue">02:00</strong></div>
                <div class="scoreItem"><div class="scoreLabel">ì ìˆ˜</div><strong id="score" class="scoreValue">0</strong></div>
                <div class="scoreItem"><div class="scoreLabel">ì½¤ë³´</div><strong id="combo" class="scoreValue comboValue">0</strong></div>
            </div>
        </div>

        <div class="hud" id="hud">
            <div class="time-gauge-container" id="timeGaugeContainer">
                <div class="time-gauge-fill" id="timeGaugeFill"></div>
                <div class="time-gauge-icon" id="timeGaugeIcon">
                    <div class="icon-shape">
                        <div class="icon-pole-N">N</div>
                        <div class="icon-pole-S">S</div>
                    </div> 
                </div>
            </div>
        </div>

        <div class="main">
            <div class="play" id="playArea" aria-label="ìì„ ì´ë™ ì˜ì—­">
                <div class="zone n" aria-hidden="true"></div>
                <div class="zone s" aria-hidden="true"></div>
                <div class="divider" aria-hidden="true"></div>

                <div id="refN" class="refMag refN" style="left:0; top:0; transform:translateY(-50%); border-bottom-left-radius: 0; border-bottom-right-radius: 0;">
                    <div class="refLabel" style="margin-top: 140px;">N</div>
                </div>

                <div id="refS" class="refMag refS" style="right:0; top:0; transform:translateY(-50%); border-bottom-left-radius: 0; border-bottom-right-radius: 0;">
                    <div class="refLabel" style="margin-top: 140px;">S</div>
                </div>

                <div id="glow" class="glow" style="width:520px;height:520px;"></div>

                <div id="white" class="whiteMag" style="left:50%;top:76%;">
                    <div id="whiteTop" class="whiteHalf whiteTop">
                        <div class="whiteLabel" id="whiteLabel">?</div>
                    </div>
                    
                    <div id="whiteBottom" class="whiteHalf whiteBottom"></div>
                </div>
            </div>

            
            <div class="panel" aria-label="ê·¹ ì„ íƒ ì˜ì—­">
                <div class="question">?ê·¹ì˜ ì •ì²´ëŠ” ë¬´ì—‡ì¼ê¹Œìš”?</div>
                <div class="poleBtns">
                    <button id="btnN" class="pole poleN">Nê·¹</button>
                    <button id="btnS" class="pole poleS">Sê·¹</button>
                </div>

                <div id="feedback" class="feedback">ë“œë˜ê·¸í•´ ë°˜ì‘ì„ í™•ì¸í•œ ë’¤ ì„ íƒí•˜ì„¸ìš”</div>
                
                <div class="gameMethod">
                    <div class="gameMethodTitle">â­ ê²Œì„ ë°©ë²•</div>
                    <div class="gameMethodContent">
                        í°ìƒ‰ ìì„ì„ ì›€ì§ì—¬ Nê·¹ê³¼ Sê·¹ì— ê°€ê¹Œì´í•œ í›„,<br>
                        ?ê·¹ì˜ ì •ì²´ë¥¼ ë§ì¶°ë´…ì‹œë‹¤.
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="gameOverPopup" class="fullScreenPanel" style="display: none; z-index: 1100;">
    <div class="popupContent">
        <div class="popupTitle">ì‹œê°„ ì¢…ë£Œ!â±ï¸</div>
        <div class="finalScoreText">ìµœì¢… ì ìˆ˜ëŠ”...</div>
        <div id="finalScore" class="popupScore">0</div>
        <div class="popupButtons">
            <button id="restartGameBtn" class="actionBtn retryBtn">ì¬ë„ì „ (ë°”ë¡œ ì‹œì‘)</button>
            <button id="toConceptBtn" class="actionBtn conceptBtn">ì²˜ìŒìœ¼ë¡œ (ê°œë… í™•ì¸)</button>
        </div>
    </div>
</div>

<script>
    /* ------------------------------ *
     * ìƒíƒœ ë° ìƒìˆ˜           *
     * ------------------------------ */
    const playArea = document.getElementById('playArea');
    const white = document.getElementById('white');
    const refN = document.getElementById('refN');
    const refS = document.getElementById('refS');
    const glow = document.getElementById('glow');
    const feedback = document.getElementById('feedback');
    const scoreEl = document.getElementById('score');
    const comboEl = document.getElementById('combo');
    const btnN = document.getElementById('btnN');
    const btnS = document.getElementById('btnS');
    const timerEl = document.getElementById('timer');
    const timerItem = document.querySelector('.scoreItem.timer');
    const gameOverPopup = document.getElementById('gameOverPopup');
    const finalScoreEl = document.getElementById('finalScore');
    const restartGameBtn = document.getElementById('restartGameBtn');
    const toConceptBtn = document.getElementById('toConceptBtn');
    const conceptScreen = document.getElementById('conceptScreen');
    const gameScreen = document.getElementById('gameScreen');
    const startButton = document.getElementById('startButton');

    // ê²Œì´ì§€ ë°” ê´€ë ¨ ìš”ì†Œ ì¶”ê°€
    const timeGaugeContainer = document.getElementById('timeGaugeContainer');
    const timeGaugeFill = document.getElementById('timeGaugeFill');
    const timeGaugeIcon = document.getElementById('timeGaugeIcon');

    let score = 0, combo = 0;

    // íƒ€ì´ë¨¸ ìƒìˆ˜ ë° ë³€ìˆ˜
    const INITIAL_TIME = 120; // 2ë¶„
    const CRITICAL_TIME_SECONDS = 10; 
    let timeLeft = INITIAL_TIME;
    let timerInterval = null;

    let whitePole = randomChoice(['N','S']);
    let pos = {x:0,y:0}, dragging=false, lastPointer=null;
    let reactionInterval = null;
    const reactionPeriod = 500; // ë°˜ì‘ ì£¼ê¸°

    // ìì„ ìœ„ì¹˜ ë° ê±°ë¦¬ ìƒìˆ˜
    const refRadius = 140; 
    const whiteHeight = 300; 
    const reactionPointOffset = whiteHeight / 4; 
    const whitePolarDistance = 50; 
    const attractionThresholdPx = 120;
    const attractSnapPx = 0; 
    const repelBufferPx = 140;
    const CORRECT_ANSWERS = { concept1: 'repel', concept2: 'attract' };
    let concept1Correct = false;
    let concept2Correct = false;


    /* ------------------------------ *
     * ìœ í‹¸ë¦¬í‹°             *
     * ------------------------------ */
    function randomChoice(arr){ return arr[Math.floor(Math.random()*arr.length)]; }
    function center(el){ 
        const r = el.getBoundingClientRect();
        return {
            x: r.left + r.width / 2, 
            y: r.top + refRadius
        };
    }
    function dist(a,b){ const dx=a.x-b.x, dy=a.y-b.y; return Math.sqrt(dx*dx + dy*dy); }
    function vibrate(ms){ if(navigator.vibrate) navigator.vibrate(ms); }
    function restartAnimation(el, className) {
        el.classList.remove(className);
        void el.offsetWidth; 
        el.classList.add(className);
    }
    function enableSubmitButtons() {
        btnN.disabled = false;
        btnS.disabled = false;
        btnN.style.opacity = '1';
        btnS.style.opacity = '1';
    }
    function disableSubmitButtons() {
        btnN.disabled = true;
        btnS.disabled = true;
        btnN.style.opacity = '0.4';
        btnS.style.opacity = '0.4';
    }
    function getReactionPoint(centerPos) {
        return {
            x: centerPos.x,
            y: centerPos.y - reactionPointOffset 
        };
    }
    function getRefBoundaryY() {
        const pa = playArea.getBoundingClientRect();
        const refTopEdgeY = pa.top; 
        const whiteHalfHeight = whiteHeight / 2;
        return refTopEdgeY + whiteHalfHeight;
    }


    /* ------------------------------ *
     * ìœ„ì¹˜ ë° ë Œë”ë§          *
     * ------------------------------ */
    function initPositions(){
        const pa = playArea.getBoundingClientRect();
        pos.x = pa.left + pa.width*0.5;
        pos.y = pa.top + pa.height*0.76;
        renderWhite();
    }
    function renderWhite(){ 
        const pa = playArea.getBoundingClientRect();
        white.style.left = (pos.x - pa.left) + 'px'; 
        white.style.top = (pos.y - pa.top) + 'px';
    }

    // ì°½ í¬ê¸° ë³€ê²½ ì‹œ ìœ„ì¹˜ ì´ˆê¸°í™”
    window.addEventListener('resize', ()=>{
        if (gameScreen.style.display !== 'none') {
            initPositions();
        }
    });

    /* ------------------------------ *
     * ë“œë˜ê·¸ ë° ì¶©ëŒ ë°©ì§€         *
     * ------------------------------ */
    function getEventPos(e){ if(e.touches && e.touches[0]) return {x:e.touches[0].clientX, y:e.touches[0].clientY}; return {x:e.clientX, y:e.clientY};}
    function startDrag(e){ 
        if (!timerInterval && gameScreen.style.display !== 'none') return;

        e.preventDefault(); 
        dragging=true; 
        white.setPointerCapture?.(e.pointerId); 
        lastPointer=getEventPos(e); 
        white.style.cursor='grabbing';
    }
    function moveDrag(e){ 
        if(!dragging) return; 
        const p=getEventPos(e); 
        const dx=p.x-lastPointer.x, dy=p.y-lastPointer.y; 
        lastPointer=p; 
        pos.x += dx; 
        pos.y += dy; 
        clampAndRender(); 
        checkProximityContinuous();

        // ì‹œê°ì  í”¼ë“œë°±
        const pa = playArea.getBoundingClientRect();
        const normalizedX = (pos.x - pa.left) / pa.width; 
        const rot = (normalizedX - 0.5) * 8; 
        white.style.setProperty('--rot', `${rot}deg`);
        white.style.setProperty('--dx', `${dx*0.05}px`); 
        white.style.setProperty('--dy', `${dy*0.05}px`);
    }
    function endDrag(){ 
        dragging=false; 
        white.style.cursor='grab'; 
        lastPointer=null; 
        white.style.setProperty('--rot', '0deg');
        white.style.setProperty('--dx', '0px');
        white.style.setProperty('--dy', '0px');
    }

    white.addEventListener('pointerdown', startDrag);
    window.addEventListener('pointermove', moveDrag);
    window.addEventListener('pointerup', endDrag);
    white.addEventListener('touchstart', startDrag, {passive:false});
    window.addEventListener('touchmove', moveDrag, {passive:false});
    window.addEventListener('touchend', endDrag);

    // ê²¹ì¹¨ ë°©ì§€ ë¡œì§
    function applyOverlapPrevention(cWhiteR, cRef) {
        const dx = cWhiteR.x - cRef.x;
        const dy = cWhiteR.y - cRef.y;
        const distance = dist(cWhiteR, cRef);
        const minDistance = refRadius + whitePolarDistance;
        
        if (distance < minDistance) {
            const pushScale = (minDistance / distance);
            cWhiteR.x = cRef.x + dx * pushScale;
            cWhiteR.y = cRef.y + dy * pushScale;
        }
        return cWhiteR;
    }

    function clampAndRender(){
        const pa = playArea.getBoundingClientRect();
        const w = white.offsetWidth, h = white.offsetHeight;
        
        // ê²½ê³„ì„  í´ë¨í•‘
        pos.x = Math.max(pa.left + w*0.5, Math.min(pa.right - w*0.5, pos.x));
        pos.y = Math.min(pa.bottom - h*0.5, pos.y); 

        const refBoundaryY = getRefBoundaryY();
        pos.y = Math.max(refBoundaryY, pos.y); 
        
        const cRefN = center(refN);
        const cRefS = center(refS);
        
        let cWhiteReactionPoint = getReactionPoint(pos); 
        
        // ê²¹ì¹¨ ë°©ì§€ ì ìš©
        cWhiteReactionPoint = applyOverlapPrevention(cWhiteReactionPoint, cRefN);
        cWhiteReactionPoint = applyOverlapPrevention(cWhiteReactionPoint, cRefS);
        
        pos.x = cWhiteReactionPoint.x;
        pos.y = cWhiteReactionPoint.y + reactionPointOffset; 
        
        renderWhite();
    }

    /* ------------------------------ *
     * ìê¸° ë°˜ì‘            *
     * ------------------------------ */
    function edgeDistanceToRef(refEl){
        const cWhiteCenter = {x: pos.x, y: pos.y};
        const cWhiteReactionPoint = getReactionPoint(cWhiteCenter); 
        const cref = center(refEl);
        const centerD = dist(cWhiteReactionPoint, cref);
        
        const edgeDist = centerD - refRadius - whitePolarDistance;
        return edgeDist;
    }

    function checkProximityContinuous(){
        if (!timerInterval) return;

        const pa = playArea.getBoundingClientRect();
        const cWhite = {x: pos.x, y: pos.y};
        const isInZoneN = (cWhite.x - pa.left) < pa.width * 0.5; // ì—¬ì „íˆ ì¤‘ì•™ì„ ì„ ê¸°ì¤€ìœ¼ë¡œ N/S êµ¬ì—­ íŒì •
        const edgeN = edgeDistanceToRef(refN);
        const edgeS = edgeDistanceToRef(refS);
        
        // Glow íš¨ê³¼
        const refEl = isInZoneN ? refN : refS;
        const c = center(refEl);
        const edge = isInZoneN ? edgeN : edgeS;

        glow.style.left = (c.x - pa.left) + 'px';
        glow.style.top = (c.y - pa.top) + 'px';
        glow.style.background = isInZoneN ? 'rgba(127,181,255,0.3)' : 'rgba(255,138,155,0.3)';
        glow.style.opacity = `${Math.max(0, 1 - Math.min(edge / 440, 1))}`;

        // ë°˜ì‘ ì‹œì‘/ì¢…ë£Œ
        const type = isInZoneN ? 'N' : 'S';
        if(edge <= attractionThresholdPx){ 
            startReactionLoop(type, refEl);
        } else if(reactionInterval && edge > attractionThresholdPx + 15){ 
            stopReactionLoop();
        }
    }

    function startReactionLoop(type, refEl){
        if(reactionInterval) return;
        triggerReactionOnce(type, refEl);
        reactionInterval = setInterval(()=>{ triggerReactionOnce(type, refEl); }, reactionPeriod); 
    }
    function stopReactionLoop(){ 
        if(reactionInterval){ 
            clearInterval(reactionInterval); 
            reactionInterval = null; 
            glow.style.opacity = 0;
        } 
    }

    function triggerReactionOnce(targetType, targetEl){
        if (!window.interacted) {
            window.interacted = true;
            enableSubmitButtons(); 
        }
        
        const isAttach = (targetType === 'N' && whitePole === 'S') ||
                         (targetType === 'S' && whitePole === 'N');
        const localTarget = {x: center(targetEl).x, y: center(targetEl).y};
        
        if(isAttach){
            playAttach(localTarget); 
            vibrate(30);
        } else {
            playRepel(localTarget);
            vibrate([40,20]);
        }
    }

    function applyMagnetMove(targetLocal, isAttach){
        const cWhiteCenter = {x: pos.x, y: pos.y};
        const cWhiteReactionPoint = getReactionPoint(cWhiteCenter); 
        const cRef = targetLocal;
        const dx = cWhiteReactionPoint.x - cRef.x, dy = cWhiteReactionPoint.y - cRef.y;
        const distance = dist(cWhiteReactionPoint, cRef);
        
        const buffer = isAttach ? attractSnapPx : repelBufferPx; 
        const targetDistance = refRadius + whitePolarDistance + buffer;
        const moveDistance = targetDistance - distance; 
        const moveScale = moveDistance / distance;

        const finalReactionPointX = cRef.x + dx * (1 + moveScale);
        const finalReactionPointY = cRef.y + dy * (1 + moveScale);

        pos.x = finalReactionPointX;
        pos.y = finalReactionPointY + reactionPointOffset; 
        
        clampAndRender();
    }

    function playAttach(targetLocal){
        applyMagnetMove(targetLocal, true);
        
        white.classList.remove('repelEffect');
        restartAnimation(white, 'attachEffect');
        
        feedback.style.background = 'linear-gradient(90deg, #f0fff5, #d9f3e4)';
        feedback.textContent = 'ìì„ë¼ë¦¬ ëŒì–´ë‹¹ê²¼ì–´ìš”. ?ê·¹ì€ ë¬´ìŠ¨ ê·¹ì¼ê¹Œìš”?';
    }


    function playRepel(targetLocal){
        applyMagnetMove(targetLocal, false);
        
        white.classList.remove('attachEffect');
        restartAnimation(white, 'repelEffect'); 
        
        feedback.style.background = 'linear-gradient(180deg, var(--card-bg), var(--card-bg))'; // ë‰´ëª¨í”¼ì¦˜ ë°°ê²½
        feedback.textContent = 'ìì„ë¼ë¦¬ ë°€ì–´ëƒˆì–´ìš”. ?ê·¹ì€ ë¬´ìŠ¨ ê·¹ì¼ê¹Œìš”?'; 
    }


    /* ------------------------------ *
     * íƒ€ì´ë¨¸ ë° ê²Œì„ ë¡œì§         *
     * ------------------------------ */
    function formatTime(seconds) {
        const minutes = Math.floor(seconds / 60);
        const remainingSeconds = seconds % 60;
        return `${String(minutes).padStart(2, '0')}:${String(remainingSeconds).padStart(2, '0')}`;
    }

    function updateTimer() {
        if (timeLeft <= 0) {
            clearInterval(timerInterval);
            timerInterval = null;
            timerEl.textContent = '00:00';
            timeGaugeFill.style.width = '0%';
            timeGaugeIcon.style.left = '100%';
            endGame();
            return;
        }

        timeLeft--;
        timerEl.textContent = formatTime(timeLeft);

        // ê²Œì´ì§€ ë°” ì—…ë°ì´íŠ¸
        const percentage = (timeLeft / INITIAL_TIME) * 100;
        timeGaugeFill.style.width = `${percentage}%`;
        // ì•„ì´ì½˜ì€ ì§„í–‰ë¥ ì„ ë‚˜íƒ€ëƒ„ (ë‚¨ì€ ì‹œê°„ì˜ ë°˜ëŒ€)
        timeGaugeIcon.style.left = `${100 - percentage}%`; 

        // 10ì´ˆ ë¯¸ë§Œ ê²½ê³  ì‹œê° íš¨ê³¼
        if (timeLeft <= CRITICAL_TIME_SECONDS) {
            timerItem.classList.add('critical');
            timeGaugeContainer.classList.add('critical');
        } else {
            timerItem.classList.remove('critical');
            timeGaugeContainer.classList.remove('critical');
        }
    }
    
    function startGameTimer() {
        if (timerInterval) clearInterval(timerInterval);
        timerInterval = setInterval(updateTimer, 1000);
    }

    function submit(choice){
        if (!window.interacted) {
            feedback.style.background = 'linear-gradient(180deg, var(--card-bg), var(--card-bg))';
            feedback.textContent = 'ìì„ì„ ì›€ì§ì—¬ ë°˜ì‘ì„ ë¨¼ì € í™•ì¸í•˜ì„¸ìš”!';
            return; 
        }
        
        if (!timerInterval) return;

        disableSubmitButtons(); 
        const isCorrect = (choice === whitePole);
        
        if(isCorrect){
            score += 100 + Math.floor(10 * combo);
            combo++;
            feedback.style.background = 'linear-gradient(90deg, var(--success), #a8e6d2)';
            feedback.textContent = 'ì •ë‹µì´ì—ìš”! ğŸ‰'; 
        } else {
            score = Math.max(0, score - 40);
            combo = 0;
            feedback.style.background = 'linear-gradient(180deg, #fff2f2, #ffebeb)'; 
            feedback.textContent = `ì˜¤ë‹µì´ì—ìš”. ì •ë‹µì€ ${whitePole}ê·¹! ğŸ˜¥`; 
        }

        scoreEl.textContent = score;
        comboEl.textContent = combo;
        
        // **********************************************
        // ğŸ”” ìˆ˜ì •: ë‹¤ìŒ ë¬¸ì œë¡œ ë„˜ì–´ê°€ëŠ” ëŒ€ê¸° ì‹œê°„ì„ 3ì´ˆ(3000ms)ë¡œ ë³€ê²½ (í”¼ë“œë°± ì¶œë ¥ ì‹œê°„ 2ë°°)
        setTimeout(nextRound, 1500); 
        // **********************************************
    }

    function nextRound(){
        stopReactionLoop();
        window.interacted = false; 
        disableSubmitButtons(); 
        initPositions(); 
        feedback.style.background = 'linear-gradient(180deg, var(--card-bg), var(--card-bg))'; // ë‰´ëª¨í”¼ì¦˜ ë°°ê²½
        feedback.textContent = 'ë“œë˜ê·¸í•´ ë°˜ì‘ì„ í™•ì¸í•œ ë’¤ ì„ íƒí•˜ì„¸ìš”'; 
        whitePole = randomChoice(['N','S']);
    }

    /* ------------------------------ *
     * ê²Œì„ ì¢…ë£Œ ë° ì¬ì‹œì‘        *
     * ------------------------------ */
    function endGame() {
        gameScreen.style.pointerEvents = 'none';
        disableSubmitButtons();
        stopReactionLoop();
        
        finalScoreEl.textContent = score;
        gameOverPopup.style.display = 'flex';
    }

    function resetGame() {
        score = 0;
        combo = 0;
        timeLeft = INITIAL_TIME;
        scoreEl.textContent = score;
        comboEl.textContent = combo;
        timerEl.textContent = formatTime(timeLeft);
        timerItem.classList.remove('critical');

        // ê²Œì´ì§€ ì´ˆê¸°í™”
        timeGaugeFill.style.width = '100%';
        timeGaugeIcon.style.left = '0%';
        timeGaugeContainer.classList.remove('critical');
        
        gameOverPopup.style.display = 'none';
        gameScreen.style.pointerEvents = 'auto';
    }

    function restartGame() {
        resetGame();
        startGameTimer();
        nextRound();
    }

    function goToConceptScreen() {
        resetGame();
        gameScreen.style.display = 'none';
        conceptScreen.style.display = 'flex';
        
        // ê°œë… í™•ì¸ ìƒíƒœ ì´ˆê¸°í™”
        concept1Correct = false;
        concept2Correct = false;
        document.querySelectorAll('.conceptButtons button').forEach(btn => {
            btn.disabled = false;
            btn.classList.remove('correct', 'incorrect');
        });
        document.getElementById('fb1').innerHTML = '';
        document.getElementById('fb2').innerHTML = '';
        updateStartButton();
    }


    /* ------------------------------ *
     * ê°œë… í™•ì¸ ë¡œì§          *
     * ------------------------------ */
    function setConceptButtonsDisabled(concept, disabled) {
        const questionRowEl = document.getElementById(concept === 'concept1' ? 'q1' : 'q2');
        const buttons = questionRowEl.querySelectorAll('.conceptButtons button');
        buttons.forEach(btn => {
            btn.disabled = disabled;
            btn.classList.remove('incorrect', 'correct');
        });
    }

    function checkConceptAnswer(concept, choice, button) {
        if ((concept === 'concept1' && concept1Correct) || (concept === 'concept2' && concept2Correct)) return;

        setConceptButtonsDisabled(concept, true); 

        const isCorrect = CORRECT_ANSWERS[concept] === choice;
        const feedbackEl = document.getElementById(concept === 'concept1' ? 'fb1' : 'fb2');
        const questionRowEl = document.getElementById(concept === 'concept1' ? 'q1' : 'q2');
        const buttons = questionRowEl.querySelectorAll('.conceptButtons button');
        
        feedbackEl.classList.remove('show');
        setTimeout(() => { feedbackEl.classList.add('show'); }, 50);

        if (isCorrect) {
            button.classList.add('correct');
            feedbackEl.innerHTML = `âœ… ì •ë‹µ! ${concept === 'concept1' ? 'ê°™ì€ ê·¹ë¼ë¦¬ ë§Œë‚˜ë©´ ì„œë¡œ ë°€ì–´ëƒ…ë‹ˆë‹¤.' : 'ë‹¤ë¥¸ ê·¹ë¼ë¦¬ ë§Œë‚˜ë©´ ì„œë¡œ ëŒì–´ë‹¹ê¹ë‹ˆë‹¤.'}`;
            feedbackEl.style.color = 'var(--success)'; 
            
            if (concept === 'concept1') concept1Correct = true;
            else concept2Correct = true;

            buttons.forEach(btn => {
                if (btn !== button) btn.disabled = true;
            });

        } else {
            button.classList.add('incorrect');
            feedbackEl.innerHTML = `âŒ ìì„ì˜ ì›ë¦¬ë¥¼ ë‹¤ì‹œ ìƒê°í•´ ë³´ì„¸ìš”.`;
            feedbackEl.style.color = 'var(--error)'; 
            
            // 1ì´ˆ ë’¤ ì¬ì„ íƒ ê°€ëŠ¥ (ê°œë… í™•ì¸ ì¬ì‹œë„ ì‹œê°„ì€ ê·¸ëŒ€ë¡œ ìœ ì§€)
            setTimeout(() => {
                setConceptButtonsDisabled(concept, false);
                feedbackEl.innerHTML = '';
                feedbackEl.classList.remove('show');
                button.classList.remove('incorrect');
            }, 1000); 
        }

        updateStartButton();
    }

    function updateStartButton() {
        if (concept1Correct && concept2Correct) {
            startButton.disabled = false;
            startButton.textContent = 'ğŸš€ ê²Œì„ ì‹œì‘í•˜ê¸° (ì›ë¦¬ í™•ì¸ ì™„ë£Œ!)';
        } else {
            startButton.disabled = true;
            startButton.textContent = 'ê²Œì„ì„ ì‹œì‘í•˜ê¸° (ëª¨ë“  ê°œë…ì„ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤)';
        }
    }

    function startGame() {
        if (concept1Correct && concept2Correct) {
            conceptScreen.style.display = 'none';
            gameScreen.style.display = 'block';
            initPositions(); 
            resetGame(); 
            startGameTimer(); 
            nextRound(); 
        }
    }

    /* ------------------------------ *
     * ì´ë²¤íŠ¸ ë°”ì¸ë”©          *
     * ------------------------------ */
    document.querySelectorAll('.conceptButtons button').forEach(button => {
        button.addEventListener('click', function() {
            const concept = this.dataset.concept;
            const choice = this.dataset.choice;
            checkConceptAnswer(concept, choice, this);
        });
    });

    startButton.addEventListener('click', startGame);
    restartGameBtn.addEventListener('click', restartGame);
    toConceptBtn.addEventListener('click', goToConceptScreen);
    btnN.onclick = () => submit('N');
    btnS.onclick = () => submit('S');

    /* ------------------------------ *
     * ì´ˆê¸°í™” í•¨ìˆ˜          *
     * ------------------------------ */
    (function init(){
        if (conceptScreen) conceptScreen.style.display = 'flex';
        if (gameScreen) gameScreen.style.display = 'none';

        scoreEl.textContent = score;
        comboEl.textContent = combo;
        document.getElementById('whiteLabel').textContent = '?';
        timerEl.textContent = formatTime(INITIAL_TIME); 
        
        window.interacted = false; 
        disableSubmitButtons();
        
        updateStartButton();
    })();
</script>
</body>
</html>